<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MedPresc Â· Dark dashboard</title>
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <div class="app-wrapper">
      <!-- SIDEBAR (collapsible) -->
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <div class="sidebar-logo">ğŸ’Š</div>
          <h2>MedPresc</h2>
        </div>

        <!-- User profile (dynamic) -->
        <div class="user-profile" id="sidebarUserProfile" style="display: none">
          <div class="user-avatar">ğŸ‘¨â€âš•ï¸</div>
          <div class="user-name" id="sidebarUserName"></div>
          <div class="user-email" id="sidebarUserEmail"></div>
        </div>

        <!-- Stats section (only visible when logged in) -->
        <div id="sidebarStats" style="display: none">
          <div class="stats-section">
            <div class="stats-title">ğŸ“Š overview</div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ“„</div>
              <div class="stat-info">
                <h4>total prescriptions</h4>
                <p id="totalFilesStat">0</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ‘¨â€âš•ï¸</div>
              <div class="stat-info">
                <h4>unique doctors</h4>
                <p id="uniqueDoctorsStat">0</p>
              </div>
            </div>
          </div>

          <div class="stats-section">
            <div class="stats-title">ğŸ“‹ doctors list</div>
            <div class="doctor-list" id="doctorListContainer">
              <!-- dynamically populated -->
              <div class="doctor-item">
                <span class="doctor-name">Loading...</span>
                <span class="doctor-count">-</span>
              </div>
            </div>
          </div>
        </div>

        <div class="sidebar-footer" id="sidebarFooter" style="display: none">
          <button class="logout-sidebar" id="sidebarLogoutBtn">
            <span>ğŸšª</span> sign out
          </button>
        </div>

        <!-- Guest message in sidebar -->
        <div
          id="sidebarGuest"
          style="
            margin-top: 2rem;
            text-align: center;
            color: #7b92b5;
            display: block;
          "
        >
          <span>ğŸ”’ login to access</span>
        </div>
      </aside>

      <!-- MAIN CONTENT -->
      <div class="main-content">
        <!-- Top bar with hamburger -->
        <div class="top-bar">
          <button class="hamburger" id="hamburgerBtn">â˜°</button>
          <span class="page-title">Dashboard</span>
          <div class="header-actions">
            <!-- additional actions can go here -->
          </div>
        </div>

        <!-- main container (rest of the UI) -->
        <div class="container" id="appContainer">
          <!-- header -->
          <div class="app-header">
            <div class="logo">ğŸ’Š</div>
            <h1>medpresc</h1>
            <div class="badge">secure Â· gridfs</div>
          </div>

          <!-- AUTH CARD (login/signup/forgot/reset) -->
          <div id="authCard" class="auth-card">
            <div class="auth-tabs">
              <button class="auth-tab active" id="tabLogin">login</button>
              <button class="auth-tab" id="tabSignup">sign up</button>
            </div>

            <!-- login form -->
            <div id="loginForm">
              <div class="input-group">
                <label>ğŸ“§ email</label>
                <input
                  type="email"
                  id="loginEmail"
                  placeholder="patient@example.com"
                />
              </div>
              <div class="input-group">
                <label>ğŸ”‘ password</label>
                <input
                  type="password"
                  id="loginPassword"
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                />
              </div>
              <button class="btn-primary" id="loginBtn">log in</button>
              <div class="forgot-link">
                <button id="forgotPasswordBtn">forgot password?</button>
              </div>
            </div>

            <!-- signup form (hidden by default) -->
            <div id="signupForm" style="display: none">
              <div class="input-group">
                <label>ğŸ“§ email</label>
                <input
                  type="email"
                  id="signupEmail"
                  placeholder="new@example.com"
                />
              </div>
              <div class="input-group">
                <label>ğŸ”‘ password</label>
                <input
                  type="password"
                  id="signupPassword"
                  placeholder="min 6 chars"
                />
              </div>
              <button class="btn-primary" id="signupBtn">create account</button>
            </div>

            <!-- forgot / reset inline (hidden) -->
            <div
              id="forgotContainer"
              style="display: none"
              class="reset-section"
            >
              <h4 style="margin-bottom: 1rem">ğŸ” reset password</h4>
              <div id="stepEmail">
                <div class="input-group">
                  <label>email</label
                  ><input
                    type="email"
                    id="resetEmail"
                    placeholder="your email"
                  />
                </div>
                <button class="btn-primary" id="sendResetLink">
                  send reset link
                </button>
                <button class="btn-outline mt-2" id="backToLoginFromReset">
                  â† back
                </button>
              </div>
              <div id="stepToken" style="display: none">
                <div class="input-group">
                  <label>reset token</label
                  ><input
                    type="text"
                    id="tokenInput"
                    placeholder="paste token"
                  />
                </div>
                <div class="input-group">
                  <label>new password</label
                  ><input
                    type="password"
                    id="newPass"
                    placeholder="new password"
                  />
                </div>
                <div class="input-group">
                  <label>confirm</label
                  ><input
                    type="password"
                    id="confirmPass"
                    placeholder="confirm"
                  />
                </div>
                <button class="btn-primary" id="resetPassBtn">
                  set new password
                </button>
                <button class="btn-outline mt-2" id="backToEmail">
                  â† back
                </button>
              </div>
            </div>

            <!-- messages -->
            <div id="authMessage" class="error-msg hidden"></div>
            <div id="authSuccess" class="success-msg hidden"></div>
          </div>

          <!-- MAIN APP (authenticated) -->
          <div id="mainApp" class="app-main hidden">
            <!-- upload block -->
            <div class="upload-panel">
              <h3>ğŸ“¤ upload prescription</h3>
              <div class="file-zone" id="fileDropZone">
                <input
                  type="file"
                  id="fileInput"
                  accept="image/*,application/pdf"
                />
                <label for="fileInput">
                  <span class="icon">ğŸ“„</span>
                  <span>tap to choose file (PDF/ image)</span>
                  <span class="text-small" id="selectedFileName"></span>
                </label>
              </div>
              <div class="inline-fields">
                <input
                  type="text"
                  id="doctorName"
                  placeholder="doctor name (optional)"
                />
                <input type="date" id="prescDate" />
              </div>
              <button class="btn-upload" id="uploadBtn">
                â¬† upload prescription
              </button>
            </div>

            <!-- Search and Filter Bar -->
            <div class="search-filter-bar" id="searchFilterBar">
              <div class="search-box">
                <input
                  type="text"
                  id="searchInput"
                  placeholder="Search by doctor or filename..."
                />
              </div>
              <div class="filter-group">
                <select class="filter-select" id="yearFilter">
                  <option value="all">All Years</option>
                </select>
                <select class="filter-select" id="sortSelect">
                  <option value="newest">Newest First</option>
                  <option value="oldest">Oldest First</option>
                  <option value="doctor-asc">Doctor (A-Z)</option>
                  <option value="doctor-desc">Doctor (Z-A)</option>
                  <option value="filename-asc">Filename (A-Z)</option>
                  <option value="filename-desc">Filename (Z-A)</option>
                </select>
                <div class="sort-badge" id="clearFiltersBtn">
                  <span>âœ•</span> Clear filters
                </div>
              </div>
            </div>

            <!-- prescriptions list -->
            <div class="list-header">
              <h2>ğŸ“‹ your prescriptions</h2>
              <button class="refresh-btn" id="refreshList">â†» refresh</button>
            </div>
            <div id="prescriptionsList" class="prescriptions-grid">
              <!-- dynamically loaded -->
            </div>
            <div
              id="emptyMessage"
              class="text-small"
              style="text-align: center; margin: 2rem"
            >
              no prescriptions yet. upload above.
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
      <div class="loading-circles">
        <div class="circle-orbit">
          <div class="circle"></div>
          <div class="circle"></div>
          <div class="circle"></div>
          <div class="circle"></div>
        </div>
        <div class="circle-pulse">
          <div class="circle"></div>
          <div class="circle"></div>
          <div class="circle"></div>
        </div>
      </div>
      <div class="loading-text" id="loadingText">Processing...</div>
    </div>
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>
  </body>
  <script src="js/script.js"></script>
</html>
